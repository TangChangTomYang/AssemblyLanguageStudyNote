#学习路线
为了便于学习，设计4个虚拟人物
- Alice、bob互通消息
- eve 窃听者
- Mallory 主动攻击者


![](/assets/Snip20180615_16.png)
***
![](/assets/Snip20180615_17.png)


#一、加密解密

### 加密解密主要有两种方式：对称加密（DES、3DES、AES）和 公钥密码（非对称加密，如：RSA）
![](/assets/Snip20180614_6.png)

#### 1、对称加密介绍（DES、3DES、AES）

- 1.1、**DES**<br>(1)、DES（Data Encryption Standard），DES是一种将64bit明文加密成64bit密文的对称密码算法，密钥长度是56bit。<br>(2)、规格删来说，DES密钥长度是64位，但是每个7bit会设置一个用于错误检查的bit，因此密钥长度实际是56bit。<br>(3)、由于DES每次只能加密64bit的数据，遇到比较大的数据，需要对DES加密进行迭代（反复）。<br>(4)、目前y已经可以在短时间内破解，所以不建议使用DES加密。
![](/assets/Snip20180614_1.png)

- 1.2、**3DES**<br>(1)、3DES ，将DES重复3次得到的一种密码算法，也叫做3重DES。<br>(2)、目前还在被一些银行等机构使用，但处理速度不高，安全逐渐暴露出问题。<br>(3)、因为3DES的3个密钥是不同的，也称为DES-EDE3.
![](/assets/Snip20180614_2.png)
(4)、如果3DES的3个密钥都是相同的，则结果与普通的3DES是等价的。
![](/assets/Snip20180614_4.png)(5)、如果密钥1、密钥3相同，密钥2不同，称为DES-EDE2
![](/assets/Snip20180614_5.png)

- 3、**AES （Advanced Encryption stansard）**<br>(1)、AES 是取代DES成为新标准的一种对称密码算法。<br>(2)、在2000年时选择Rijindael算法作为AES的实现。<br>(3)、目前AES已经逐步取代DES、3DES 成为首先的对称密码算法。<br>(4)、一般来说，我们也不应该去使用任何的自制的密码算法，而应使用AES，他经过了全世界密码学家所进行的高品质质检证工作。。



####2、对称密码存在的秘钥配送问题

- 1、**在使用对称密码时会遇到密钥的配送问题。**
- 2、**假设，Alice 将**使用对称加密过的消息**发送给bob。**
- 3、**只有将对称秘钥发送给bob，bob 才能完成解密。**
- 4、**在发送秘钥过程中可能会被Eve窃取密钥，最后Eve 也能完成解密。**
![](/assets/Snip20180614_7.png)


####3、对称密码的秘钥的配送问题如何解决

**主要有以下几种方式：**
- 1、**事先共享密钥（比如使用u盘）**
- 2、**秘钥分配中心**
- 3、**Diffie-Hellman密钥交换（ssh 就使用的这种）**
- 4、**公钥密码算法**






###二、公钥密码（Public-key Cryptography）

####1、公钥密码介绍

- 1、公钥密码中，密钥分为**加密密钥、解密密钥**2种，他并不是同一个密钥。
- 2、公钥密码也被称为非 对称密码（Asymmmetric Cryptography）
- 3、在公钥密码中：<br>(1)、加密密钥，一般是公开的，因此该密钥被称为公钥（publicd key）<br>、解密密钥，由消息接收者自己保管，不能公开，因此也被称为密钥（private key）<br>(2)、公钥和私钥是一对，不能单独生成，一对公钥密钥统称为密钥对。<br>(3)、由公钥加密的密文，必须由该公钥对应的私钥才能解密。
    ![](/assets/Snip20180615_1.png)
**结论：**<br>**为什么这种加密解密的方式被称为公钥密码呢？ 因为在这种方案中我们使用的是公钥来加密明文，因此俗称公钥密码。**

    
####2、公钥密码 解决密钥配送问题
- 1、由消息接收者生成一对密钥（公钥、密钥）
- 2、由消息接收者将 公钥发送给消息发送者
- 3、消息发送者使用公钥来加密明文，消息接收者食用私钥来解密密文。
![](/assets/Snip20180615_3.png)

####3、公钥密码 之 RSA
- 1、目前使用最广泛的公钥密码是RSA
- 2、RSA 的名字是由3位开发者，即 ron **R**ovest、Adi **S**hamir、Leonard **A**dleman的姓氏首字母组成。



###二、混合密码系统（Hybrid Cryptossystem）

#### 1、混合密码系统介绍
- 1、对称密码的特点：<br>不能很好的解决密钥的配送问题
- 2、公钥密钥的特点：<br>加密解密速度比较慢   
- 3、混合密码系统，是将对称密码和公钥密码的优势相结合的方法<br>(1)、解决了公钥密码速度慢的问题。<br>(2)、并通过公钥密码解决了对称密码的配送问题。
- 4、网络上的密码通信所使用的SSL/TSL 都运用了混合密码系统。

![](/assets/Snip20180617_4.png)

#### 2、混合密码系统消息交换过程
**Alice  >>>>>Bob**
<br>
**发送过程，即：加密过程**
(1)、Bob 先生成一对公钥、私钥
(2)、Bob 把公钥共享给Alice
(3)、Alice 生成一个随机会话密钥（对称密钥）
(4)、Alice 使用会话密码加密需要发送的消息
(5)、Alice 使用Bob的公钥 加密会话密钥（即使用公钥加密对称密钥，即使用非对称密钥加密对称密钥）
(6)、Alice 把4、5部得到的密文发送给Bob。

**接收过程，即：解密过程**
(1)、Bob利用自己的私钥 解密会话密钥。
(2)、Bob 利用解密后的会话密钥，解密消息密文，得到消息。

    
    


#二、单向散列函数（One-way hash function）

####一、单向散列函数介绍
- 1、单向散列函数，可以根据消息内容计算出散列值。
- 2、散列值的长度和消息的长度无关，（即，任意长度的消息消，计算出的散列值的长度都是固定的）
![](/assets/Snip20180618_2.png)
- 3、散列函数计算速度快，能快速计算出散列值。
- 4、消息不同，计算出的散列值不同
- 5、散列函数是单向的，不可逆
![](/assets/Snip20180618_3.png)
- 6、单向散列函数，又被称为消息摘要函数（Message digest function），哈希函数。
- 7、输出的散列值，也被称为消息摘要（message digest）、指纹（fingerprint）
- 8、常见的几中单向散列函数：<br><br>(1)、**MD4、MD5、**<br>&emsp;产生128bit的散列值，MD就是Message Digest的缩写，目前已经不安全<br>&emsp;Mac 终端上生成MD5摘要值
```
touch abc.txt
// 编辑文件
md5 abc.txt
// 可以直接看到MD5的伞列函数值
``` 
![](/assets/Snip20180618_1.png)
(2)、**SHA-1**<br>产生160位的散列值，目前已经不安全<br>(3)、**sHA-2**<br>有几种，SHA-256、SHA-384、SHA-512，散列值分别是：256位、384位、512位。<br>(4)、**SHA-3**<br>全新的标准

####一、单向散列函数应用场景
- 1、防止数据被篡改
- 2、正版软件的标识 （比如： https://www.realvnc.com/en/connect/download/vnc/）
![](/assets/Snip20180618_4.png)
- 3、口令加密（登录密码加密 ）



#三、数字签名

####1、数字签名的过程:生成签名、验证签名
<br>
**签名生成的过程：**
- 1、消息的发送方生成一对公私钥
- 2、消息的发送方将消息明文进行 hash 算法，得到一个消息摘要
- 3、因为消息摘要与消息之间是一一对应的指纹关系，因消息发送方使用自己的私钥对消息摘要进行签名，生成消息摘要签名的密文
- 4、消息发送方将消息摘要的签名密文和消息一起发送给消息接收方
<br>
<br>

**验证签名的过程：**
- 1、消息接收者接收到消息后，将消息明文和消息摘要的签名数据分开，得到2分数据：消息摘要的签名和消息原文。
- 2、消息接收者使用消息发送方的公钥 对消息摘要签名进行解密，得到消息摘要数据。
- 3、消息接收者对消息数据进行同样的 hash 算法，得到消息摘要数据2
- 3、如果公钥解密出的消息摘要和自己算出的消息摘要是一样的说明，接收的消息是完整的可靠地。
![](/assets/Snip20180618_5.png)

####2、数字签名不能保证机密性

- 1、因为我们发送数字签名是 是签名的消息摘要和消息明文一起发送的，因此不能保证数字的机密性。
- 2、数字签名只能保证数据的完整性。
 
**结论：**<br> (1)、数字签名的作用不是保证机密性，仅仅是为了能够识别内容有没有被篡改，即数字的完整性。<br>(2）、防止消息发送者否认。


####3、数字签名无法解决的问题

- 1、无法防止中间人的攻击
![](/assets/Snip20180618_6.png)

**如果遭遇中间人攻击：**<br>(1)、公钥将是伪造的<br>(2)、数字签名将失效<br><br>**所以：** <br>在验证签名之前，首先的验证公钥的合法性。（证书，用来验证公钥的合法性）





#四、证书（Certification）

####证书的介绍
- 1、证书，都是由权威机构认证的。
- 2、密码学中的证书，全称叫：**公钥证书（Public-key Certificate,PKC）**.里面主要包含有3部分东西：<br>(1)、姓名、邮箱等个人信息<br>(2)、此人（持证人）的公钥<br>(3)、认证机构（Certificate Authority，CA）施加的数字签名（明文和摘要签名）
- 3、CA 就是能够认定**公钥确实属于此人**并能够生成数字签名的个人或者组织。<br>- 有国际性的组织、政府设立的组织<br>- 有通过提供认证服务来盈利的企业<br>- 个人也可以成立认证机构。
















##五、iOS 签名机制